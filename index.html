<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡ßã‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ - ‡¶¨‡¶∏</title>
  <style>
    /* ‡¶¨‡¶∏‡¶≤, ‡¶®‡¶ø‡¶ö‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶∏ ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ, ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶§ ‡¶Ü‡¶∞ ‡¶∞‡ßá‡¶ó‡ßá üò§üëç */
    body {
      font-family: 'Noto Sans Bengali', sans-serif;
      background: #f4f4f4;
      padding: 1rem;
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    h2 {
      text-align: center;
      color: #2c3e50;
    }
    label {
      font-weight: bold;
      margin-top: 1rem;
      display: block;
    }
    input, button {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    button {
      cursor: pointer;
    }
    .field-group {
      margin-bottom: 1rem;
    }
    /* ‡¶á‡¶Æ‡ßá‡¶ú ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤, ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶õ‡ßã‡¶ü, ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶®‡¶∏‡¶π ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá */
    .img-tag-input {
      width: auto;
      display: inline-block;
      padding: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .img-tags-container {
      display: inline-block;
      margin-top: 0.5rem;
    }
    .img-tag {
      display: inline-block;
      background: #e2e8f0;
      color: #2d3748;
      padding: 0.3rem 0.5rem;
      margin: 0.2rem;
      border-radius: 3px;
      font-size: 0.9rem;
    }
    .img-tag span.remove-tag {
      margin-left: 0.5rem;
      color: #e74c3c;
      cursor: pointer;
      font-weight: bold;
    }
    /* ‡¶è‡¶° ‡¶¨‡¶æ‡¶ü‡¶®, ‡¶ï‡¶™‡¶ø ‡¶Ü‡¶∞ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ø‡¶Ç üò§ */
    .btn {
      background: linear-gradient(145deg, #60a5fa, #2563eb);
      border: none;
      color: #fff;
      padding: 0.7rem;
      font-size: 1rem;
      border-radius: 12px;
      margin-top: 1rem;
      width: 100%;
      transition: transform 0.2s ease;
    }
    .btn:hover {
      transform: translateY(-3px);
    }
    .button-group {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      margin-top: 1rem;
    }
    /* ‡¶∞‡¶ø‡¶ö ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶è‡¶°‡¶ø‡¶ü‡¶∞‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤, ‡¶¨‡ßã‡¶≤‡ßç‡¶° ‡¶ì ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡¶π üò° */
    .editor-toolbar {
      margin-bottom: 0.5rem;
    }
    .editor-toolbar button {
      padding: 0.3rem 0.7rem;
      margin-right: 0.3rem;
      background: #3498db;
      border: none;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
    }
    .editor {
      border: 1px solid #ccc;
      border-radius: 4px;
      min-height: 150px;
      padding: 0.5rem;
      overflow-y: auto;
    }
    /* ‡¶Ü‡¶â‡¶ü‡¶™‡ßÅ‡¶ü ‡¶ï‡ßã‡¶° ‡¶è‡¶∞‡¶ø‡ßü‡¶æ üòé */
    #generatedCode {
      background: #efefef;
      padding: 1rem;
      white-space: pre-wrap;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-top: 1rem;
      height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡ßã‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ - ‡¶¨‡¶∏, ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶ö‡ßÅ‡¶≤ ‡¶ö‡ßá‡¶∞ ‡¶Æ‡¶§ üò§üî•</h2>
    <form id="postForm">
      <div class="field-group">
        <label>‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ üßê:</label>
        <input type="number" id="postNumber" placeholder="‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: 1" required>
      </div>
      <div class="field-group">
        <label>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ üìÖ:</label>
        <input type="date" id="postDate" required>
      </div>
      <div class="field-group">
        <label>‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ üìù:</label>
        <input type="text" id="postTitle" placeholder="‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¶‡¶ø‡¶®" required>
      </div>
      <div class="field-group">
        <label>‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ üñºÔ∏è:</label>
        <input type="text" id="imageInput" class="img-tag-input" placeholder="‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶Ø‡ßá‡¶Æ‡¶®: ss.jpg)" onkeypress="if(event.key==='Enter'){ event.preventDefault(); addImageTag(); }">
        <button type="button" class="btn" style="width:auto; margin-top:0.5rem;" onclick="addImageTag()">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡¶∞ üÜï</button>
        <div class="img-tags-container" id="imageTagsContainer"></div>
      </div>
      <div class="field-group">
        <label>‡¶°‡ßá‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® üóíÔ∏è:</label>
        <div class="editor-toolbar">
          <button type="button" onclick="formatText('desc','bold')">‡¶¨‡ßã‡¶≤‡ßç‡¶°</button>
          <button type="button" onclick="addLink('desc')">‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</button>
        </div>
        <div id="postDescriptionEditor" class="editor" contenteditable="true" placeholder="‡¶°‡ßá‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶≤‡¶ø‡¶ñ‡ßã..." onkeypress="handleEnter(event)"></div>
      </div>
      <button type="submit" class="btn">‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞ üöÄ</button>
    </form>
    <hr>
    <h3>‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ HTML ‡¶ï‡ßã‡¶° - ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßá ‡¶®‡¶ø‡¶§‡ßá ‡¶¨‡¶∏ üò°üëá</h3>
    <pre id="generatedCode"></pre>
    <div class="button-group">
      <button type="button" class="btn" onclick="copyCode()">‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞ üìã</button>
      <button type="button" class="btn" onclick="downloadFile()">‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞ üíæ</button>
    </div>
  </div>

  <script>
    // ‡¶á‡¶Æ‡ßá‡¶ú ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (FIXED)
    function addImageTag() {
      const input = document.getElementById('imageInput');
      const tagText = input.value.trim();
      if (!tagText) return;
      const container = document.getElementById('imageTagsContainer');
      const tag = document.createElement('span');
      tag.className = 'img-tag';
      tag.dataset.src = tagText;  // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶´‡¶æ‡¶á‡¶≤‡¶®‡ßá‡¶Æ ‡¶ß‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
      tag.innerHTML = tagText +
        '<span class="remove-tag" onclick="this.parentElement.remove()"> ‚úñÔ∏è</span>';
      container.appendChild(tag);
      input.value = "";
    }

    function formatText(editorId, command) {
      let editor = (editorId === 'desc') ? document.getElementById('postDescriptionEditor') : null;
      editor.focus();
      document.execCommand(command, false, null);
    }
    function addLink(editorId) {
      let url = prompt("‡¶≤‡¶ø‡¶ô‡ßç‡¶ï URL ‡¶≤‡¶ø‡¶ñ‡ßã:");
      if (!url) return;
      let editor = (editorId === 'desc') ? document.getElementById('postDescriptionEditor') : null;
      editor.focus();
      document.execCommand('createLink', false, url);
    }
    function handleEnter(event) {
      if (event.key === 'Enter') {
        document.execCommand('insertHTML', false, '<br><br>');
        event.preventDefault();
      }
    }

    document.getElementById('postForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const postNumber = document.getElementById('postNumber').value.trim();
      const postDate = document.getElementById('postDate').value;
      const postTitle = document.getElementById('postTitle').value.trim();
      const postDescription = document.getElementById('postDescriptionEditor').innerHTML;

      // data-src ‡¶•‡ßá‡¶ï‡ßá ‡¶´‡¶æ‡¶á‡¶≤‡¶®‡ßá‡¶Æ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶®‡¶ø‡ßü‡ßá ‡¶Ü‡¶∏‡¶æ
      const tagEls = document.querySelectorAll('#imageTagsContainer .img-tag');
      const images = Array.from(tagEls).map(tag => tag.dataset.src);

      // ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡ßá‡¶° HTML
      let generatedHTML = `<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="date" content="${postDate}">
  <title>${postTitle}</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    body {          
      font-family: 'Noto Sans Bengali', sans-serif;          
      margin: 0;          
      padding: 2rem;          
      background: linear-gradient(120deg, #2d3b50, #1e293b);          
      color: #e0f2fe;          
      background-attachment: fixed;          
      background-size: cover;          
    }          
    .date {          
      position: absolute;          
      top: 20px;          
      right: 20px;          
      background: rgba(0, 0, 0, 0.5);          
      padding: 0.5rem 1rem;          
      border-radius: 8px;          
      font-weight: bold;          
    }          
    header {          
      text-align: center;          
      margin-bottom: 2rem;          
    }          
    h1 {          
      font-size: 2.2rem;          
      color: #38bdf8;          
    }          
    img {          
      display: block;          
      max-width: 100%;          
      height: auto;          
      border-radius: 12px;          
      margin: 2rem auto;          
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);          
    }          
    p {          
      font-size: 1.1rem;          
      color: #d1d5db;          
      line-height: 1.7;          
      max-width: 700px;          
      margin: auto;          
      margin-bottom: 1.5rem;          
      padding: 0 1rem;          
      text-align: left;          
    }          
    .button-group {          
      text-align: center;          
      margin-top: 2rem;          
    }          
    .btn {          
      background: linear-gradient(145deg, #60a5fa, #2563eb);          
      border: none;          
      color: white;          
      padding: 0.7rem 1.5rem;          
      margin: 0 1rem;          
      font-size: 1rem;          
      border-radius: 12px;          
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);          
      cursor: pointer;          
      transition: transform 0.2s ease;          
    }          
    .btn:hover {          
      transform: translateY(-3px);          
    }          
    .comment-box {          
      max-width: 600px;          
      margin: 3rem auto;          
      background: transparent;          
      border: none;          
      padding: 0;          
    }          
    .comment-box h3 {          
      margin-top: 0;          
      margin-bottom: 1rem;          
      color: #7dd3fc;          
      text-align: center;          
    }          
    .comment-input-group {          
      display: flex;          
      gap: 0.5rem;          
    }          
    .comment-box textarea {          
      width: 100%;          
      height: 35px;          
      padding: 0.8rem;          
      font-size: 1rem;          
      border-radius: 10px;          
      border: 2px solid #38bdf8;          
      background: rgba(255, 255, 255, 0.1);          
      color: #f1f5f9;          
      resize: vertical;          
      outline: none;          
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);          
      flex: 1;          
      transition: height 0.2s ease;          
    }          
    .comment-box textarea::placeholder {          
      color: #cbd5e1;          
    }          
    .comment-box textarea:focus {          
      height: 35px;          
    }          
    .send-button {          
      background: linear-gradient(135deg, #38bdf8, #0ea5e9);          
      border: none;          
      border-radius: 10px;          
      color: white;          
      font-size: 1.4rem;          
      font-weight: bold;          
      cursor: pointer;          
      padding: 0 1rem;          
      transition: background 0.3s ease;          
      display: flex;          
      align-items: center;          
      justify-content: center;          
    }          
    .send-button:hover {          
      background: linear-gradient(135deg, #0ea5e9, #0284c7);          
    }          
    footer {          
      text-align: center;          
      margin-top: 3rem;          
      font-size: 1.2rem;          
      color: #7dd3fc;          
    }          
  </style>
</head>
<body>
  <div class="date">${postDate}</div>
  <header><h1>${postTitle}</h1></header>
`;

      // ‡¶á‡¶Æ‡ßá‡¶ú ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â (relative path)
      if (images.length === 1) {
        generatedHTML += `  <img src="./${images[0]}" alt="Screenshot">\n`;
      } else if (images.length > 1) {
        generatedHTML += `  <div class="gallery">\n`;
        images.forEach((img, idx) => {
          generatedHTML += `    <img src="./${img}" alt="‡¶õ‡¶¨‡¶ø ${idx + 1}">\n`;
        });
        generatedHTML += `  </div>\n`;
      }

      generatedHTML += `  <p>${postDescription}</p>
  <div class="button-group">
    <button class="btn" onclick="window.location.href='index.html'">‡¶π‡ßã‡¶Æ</button>
    <button class="btn" onclick="sharePost()">‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßã</button>
  </div>
  <footer> DK Shuvo's Journey </footer>
</body>
</html>`;

      document.getElementById('generatedCode').textContent = generatedHTML;
    });

    function copyCode() {
      const code = document.getElementById('generatedCode').textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert('‡¶¨‡¶∏, ‡¶ï‡ßã‡¶° ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá ‡¶ó‡ßá‡¶õ‡ßá! üòä');
      }).catch(() => {
        alert('‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá! üò§');
      });
    }

    function downloadFile() {
      const postNumber = document.getElementById('postNumber').value.trim() || 'post';
      const code = document.getElementById('generatedCode').textContent;
      const filename = `post-${postNumber}.html`;
      const blob = new Blob([code], {type: "text/html"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      alert('‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡ßü‡ßá‡¶õ‡ßá, ‡¶¨‡¶∏! üòé');
    }
  </script>
</body>
  </html>
